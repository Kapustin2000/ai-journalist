# ASRP Editor Dev UI

Этот пакет — изолированное Vue 3 + Vite приложение для отладки интеграции редактора с Nest.js backend.  
Цель: быстро просматривать документы, запускать создание сессии, сохранять контент и управлять очередью правок/статусами без подключения фронта к AI напрямую.

## Возможности

- Список документов с API `/documents`
- Быстрое создание сессии (`POST /sessions`) и автоматическое открытие созданного документа
- Редактирование `title`, `content.blocks`, `content.metadata` и сохранение через `/documents/:id/save`
- Просмотр истории версий и очереди `pending_segment_updates`, а также операции apply / reject / clear
- Управление статусами (`draft`, `published`, `archived`)

## Запуск

```bash
pnpm install          # в корне репо
pnpm --dir asrp-editor install
pnpm run dev          # одновременно запустит Nest backend, ADK API и это UI
```

По умолчанию UI стучится в `http://localhost:3000`.  
Можно переопределить `VITE_API_URL` в `asrp-editor/.env`.

## Структура

- `src/App.vue` — основной layout, агрегирует список документов, редактор и панели истории/правок
- `src/services/api.ts` — слой запросов к Nest API
- `src/components/*` — атомарные вью-компоненты (список документов, форма создания сессии, редактор, история и т.п.)
- `legacy/` (если нужен) — исходные tiptap-компоненты, которые можно постепенно переносить в текущий стек

## TODO

- Встроить tiptap/расширения из старой реализации, чтобы заменить JSON-поля полноценным rich-text UI
- Прокинуть авторизацию (JWT) и пользовательские контексты
- Добавить предпросмотр документа и поддержку мультиязычных версий
